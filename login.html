<!DOCTYPE html>
<html>

<head>
	<title>Проект "Комменты"</title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="styles.css" />
</head>

<body>

	<div id="app"></div>
</body>
<script>
// рендер списка комментов -- начало




	// рендер страницы авторизации -- начало
	const renderHtml = () => {
		const appElement = document.getElementById('app');
		const loginHtml = `
		<div class="container">
		<div class="add-form-login">
			<input id="login" type="text" class="add-form-name-login" placeholder="Введите логин" value="admin" />
			<input id="password" type="password" class="add-form-name-login" placeholder="Введите пароль" value="admin" />
			<div class="add-form-row">
				<button id="buttonLogin" class="add-form-button-login">Написать</button>
			</div>
		</div>
	</div>
		`;
		appElement.innerHTML = loginHtml;
	}

	renderHtml();
	// рендер страницы авторизации -- конец

	const hostApiAuth = 'https://wedev-api.sky.pro/api/user/login';
	const loginInputElement = document.getElementById("login");
	const passwordInputElement = document.getElementById("password");
	const buttonElementlogin = document.getElementById("buttonLogin");

	//Функция переопределения токена после импорта из модуля -- начало
	let token;
	const setToken = (newToken) => {
		token = newToken;
	}
	//Функция переопределения токена после импорта из модуля -- конец

	//функция атворизации юзера --начало
	const loginUser = () => {
		return fetch(hostApiAuth, {
			method: "POST",
			body: JSON.stringify({
				login: loginInputElement.value,
				password: passwordInputElement.value,
			})
		}).then((response) => {
			return response.json();
		})
	}
	//функция атворизации юзера --конец


	//функция атворизации юзера и сохранение токена по нажатию кнопки --начало
	buttonElementlogin.addEventListener("click", () => {
		loginUser().then((responseData) => {
			setToken(responseData.user.token)
			console.log(token);
		})
	})
	//функция атворизации юзера и сохранение токена по нажатию кнопки --конец




</script>

</html>